<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <script>
            /**
             * 缺失的第一个正数
             * 
             * 
             *
             * 给你一个未排序的整数数组 nums ，请你找出其中没有出现的最小的正整数。
             * 请你实现时间复杂度为 O(n) 并且只使用常数级别额外空间的解决方案。
             *
             * 
             * 思路：数组是nums，索引是i，值是nums[i]，如果nums[i]在1到n之间，则将nums[i]交换到正确的位置上，如果nums[i]不在1到n之间，则跳过。
             * 1. 遍历数组，如果nums[i]在1到n之间，则将nums[i]交换到正确的位置上，如果nums[i]不在1到n之间，则跳过。
             * 2. 遍历数组，如果nums[i] !== i + 1，则返回i + 1。
             * 3. 如果遍历完数组，则返回n + 1。
             * 
             *  原理哈希方法。在算法中也常被称为置换
             */

            function missFirst(nums) {
                const n = nums.length;
                for(let i = 0; i < n; i++) {

                    while(nums[i] >= 1 && nums[i] <= n && nums[i] !== nums[nums[i] - 1]) {
                        const correctIndex = nums[i] - 1; // 获取当前元素应该在那个位置上
                        console.log(correctIndex, 'correctIndex');
                        
                        [nums[i], nums[correctIndex]] = [nums[correctIndex], nums[i]]; // 交换当前元素和正确位置上的元素
                    }
                }
                console.log(nums, 'nums');
                
                for(let i = 0; i < n; i++) {
                    if(nums[i] !== i + 1) {
                        return i + 1;
                    }
                }
                return n + 1;
            }

            // function missFirstWithMap(nums) {
            //     const map = new Map();

            //     for(let num of nums) {
            //         map.set(num, true);
            //     }

            //     const n = nums.length;
            //     for(let i = 1; i <= n + 1; i++) {
            //         if(!map.has(i)) {
            //             return i
            //         }
            //     }
            // }

            // console.log(missFirst([1, 2, 0]), 'missFirst');
            console.log(missFirst([3, 4, -1, 1]), 'missFirst');
            // console.log(missFirst([7, 8, 9, 11, 12]), 'missFirst');
        </script>
    </body>
</html>
